{"version":3,"sources":["angular-preload-image.js"],"names":["angular","module","factory","url","successCallback","errorCallback","element","Image","bind","attr","directive","preLoader","$timeout","outdatedTry","timeout","attrs","$set","restrict","terminal","priority","link","scope","ngSrc","default","defaultImage","preloadBgImage","css","background-image","undefined"],"mappings":"CAAA,SAAWA,GACT,YAEAA,GAAQC,OAAO,4BAEfD,EAAQC,OAAO,yBAAyBC,QAAQ,YAAa,WAE3D,MAAO,UAAUC,EAAKC,EAAiBC,GACrCL,EAAQM,QAAQ,GAAIC,QAASC,KAAK,OAAQ,WACxCJ,MACCI,KAAK,QAAS,WACfH,MACCI,KAAK,MAAON,MAInBH,EAAQC,OAAO,yBAAyBS,UAAU,gBAAiB,YAAa,WAC9E,SAAUC,EAAWC,GAEnB,GAAIC,GAAc,SAASC,EAASX,EAAKY,GACvCH,EACE,WACED,EAAUR,EAAK,WACbY,EAAMC,KAAK,MAAOb,IACjB,WACDU,EAAsB,EAAVC,GAAe,IAAMX,EAAKY,MAG1CD,GAIJ,QACEG,SAAU,IACVC,UAAU,EACVC,SAAU,IACVC,KAAM,SAAUC,EAAOf,EAASS,GAC9B,GAAIZ,GAAMY,EAAMO,KAEhBD,GAAME,QAAUR,EAAMS,cAAgB,6NAEtCT,EAAMC,KAAK,MAAOK,EAAME,SAExBV,EAAY,EAAGV,EAAKY,QAM5Bf,EAAQC,OAAO,yBAAyBS,UAAU,kBAAmB,YAAa,WAChF,SAAUC,EAAWC,GAEnB,GAAIC,GAAc,SAASC,EAASR,EAASS,GAC3CH,EACE,WACED,EAAUI,EAAMU,eAAgB,WAC9BnB,EAAQoB,KACNC,mBAAoB,QAAUZ,EAAMU,eAAiB,QAEtD,WACDZ,EAAsB,EAAVC,GAAe,IAAMR,EAASS,MAG9CD,GAIJ,QACEG,SAAU,IACVG,KAAM,SAAUC,EAAOf,EAASS,GAEDa,SAAzBb,EAAMU;AAGRJ,EAAME,QAAUR,EAAMS,cAAgB,6NAEtClB,EAAQoB,KACNC,mBAAoB,QAAUN,EAAME,QAAQ,OAG9CV,EAAY,EAAGP,EAASS,UAOjCf","file":"angular-preload-image.min.js","sourcesContent":["(function (angular) {\n  'use strict';\n\n  angular.module('angular-preload-image', []);\n\n  angular.module('angular-preload-image').factory('preLoader', function () {\n\n    return function (url, successCallback, errorCallback) {\n      angular.element(new Image()).bind('load', function () {\n        successCallback();\n      }).bind('error', function () {\n        errorCallback();\n      }).attr('src', url);\n    };\n  });\n\n  angular.module('angular-preload-image').directive('preloadImage', ['preLoader', '$timeout',\n    function (preLoader, $timeout) {\n\n      var outdatedTry = function(timeout, url, attrs) {\n        $timeout(\n          function() {\n            preLoader(url, function () {\n              attrs.$set('src', url);\n            }, function () {\n              outdatedTry(timeout * 2 || 1000, url, attrs);\n            });\n          },\n          timeout\n        );\n      };\n\n      return {\n        restrict: 'A',\n        terminal: true,\n        priority: 100,\n        link: function (scope, element, attrs) {\n          var url = attrs.ngSrc;\n\n          scope.default = attrs.defaultImage || 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEWEygNWiLqlwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAMSURBVAjXY/j//z8ABf4C/tzMWecAAAAASUVORK5CYII=';\n\n          attrs.$set('src', scope.default);\n\n          outdatedTry(0, url, attrs);\n        }\n      };\n    }\n  ]);\n\n  angular.module('angular-preload-image').directive('preloadBgImage', ['preLoader', '$timeout',\n    function (preLoader, $timeout) {\n\n      var outdatedTry = function(timeout, element, attrs) {\n        $timeout(\n          function() {\n            preLoader(attrs.preloadBgImage, function () {\n              element.css({\n                'background-image': 'url(\"' + attrs.preloadBgImage + '\")'\n              });\n            }, function () {\n              outdatedTry(timeout * 2 || 1000, element, attrs);\n            });\n          },\n          timeout\n        );\n      };\n\n      return {\n        restrict: 'A',\n        link: function (scope, element, attrs) {\n\n          if (attrs.preloadBgImage !== undefined) {\n\n            //Define default image\n            scope.default = attrs.defaultImage || 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEWEygNWiLqlwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAMSURBVAjXY/j//z8ABf4C/tzMWecAAAAASUVORK5CYII=';\n\n            element.css({\n              'background-image': 'url(\"' + scope.default+'\")'\n            });\n\n            outdatedTry(0, element, attrs);\n          }\n        }\n      };\n    }\n  ]);\n\n})(angular);"],"sourceRoot":"/source/"}